<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false,"dimmer":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="JingFengJi">
<meta property="og:url" content="https://jingfengji.github.io/page/5/index.html">
<meta property="og:site_name" content="JingFengJi">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JingFengJi">






  <link rel="canonical" href="https://jingfengji.github.io/page/5/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>JingFengJi</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">JingFengJi</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jingfengji.github.io/2017/04/25/Lua/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.Ding">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JingFengJi">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/04/25/Lua/" class="post-title-link" itemprop="url">Lua</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-04-25 10:30:05" itemprop="dateCreated datePublished" datetime="2017-04-25T10:30:05+08:00">2017-04-25</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-11 22:02:49" itemprop="dateModified" datetime="2019-03-11T22:02:49+08:00">2019-03-11</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/lua/" itemprop="url" rel="index"><span itemprop="name">lua</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/04/25/Lua/" class="leancloud_visitors" data-flag-title="Lua">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">Views: </span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <meta name="referrer" content="no-referrer">

<p>两个连字符（–）在Lua中表示开始一条注释</p>
<p>Lua定义一个计算阶乘的函数：<br>–定义一个阶乘函数<br>function fact(n)<br>if n == 0 then<br>return 1<br>else<br>return n * fact(n-1)<br>end<br>end</p>
<p>–打印<br>print(“Hello World”)</p>
<p>–读取一个数字<br>a = io.read(“*number”)</p>
<p>Lua执行的 每段代码，例如一个源代码文件或在交互模式中输入的一行代码，都称为一个“程序块”，一个程序块也就是一连串的语句或命令。</p>
<p>几条连续的Lua语句之间并不需要分隔符，但也可以使用分号来分割语句。<br>代码中的换行不起任何作用<br>a = 1 b=a*2 –有点难看，但是合法</p>
<p>程序块可以是任意大小</p>
<h2 id="语法规范"><a href="#语法规范" class="headerlink" title="语法规范"></a>语法规范</h2><p>Lua的标识符可以是任意字母、数字和下画线构成的字符串，但不能以数字开头</p>
<p>Lua的保留字：<br>and break do else elseif<br>end false for function if<br>in local nil not or<br>repeat return then true unitl<br>while</p>
<p>Lua 是有大小写之分的</p>
<p>Lua注释：<br>可以在任何地方以两个连字符（–）开始一个“行注释”，该注释一直延伸到一行的结尾。<br>Lua也提供了“块注释”，以“–[[”开始，直至“–]]”，如果块注释包含的“–]]”并非是注释结尾，例如下面的例子</p>
<pre><code>--[[
function fact(n)
    if n == 0 then
        return 1
    else
        return n * fact(n - 1)
    end
end
--]]
print(&quot;enter a number:&quot;)            --打印
a = io.read(&quot;*number&quot;)              --读取一个数字
print(fact(a))
--]]
</code></pre><p>如果代码中的第一个“–]]”并非是想要的块注释结尾，那么就改为以下依然合法</p>
<pre><code>--[=[
function fact(n)
    if n == 0 then
        return 1
    else
        return n * fact(n - 1)
    end
end
--]]
print(&quot;enter a number:&quot;)            --打印
a = io.read(&quot;*number&quot;)              --读取一个数字
print(fact(a))
--]=]
</code></pre><p>Lua全局变量：<br>全局变量不需要声明。只需要将一个值赋予一个全局变量就可以创建了。在Lua中，访问一个未初始化的变量不会引发错误，访问结果是一个特殊的值nil。</p>
<pre><code>print(a)        --nil
a=10
print(a)        --10
</code></pre><p>删除一个全局变量，只需要将其赋值为nil</p>
<p>Lua类型与值：<br>Lua是一种动态类型的语言。在语言中没有类型定义的语法，每个值都“携带”了它本身的类型信息。<br>在Lua中有8种基础类型：nil（空），boolean（布尔），number（数字），string（字符串），userdata（自定义类型），function（函数），thread（线程），table（表）。函数type可根据一个值返回其类型名称。</p>
<pre><code>print(type(&quot;Hello world&quot;))      --string
print(type(10.4 * 3))           --number
print(type(print))              --function
print(type(type))               --function
print(type(true))               --boolean
print(type(nil))                --nil
print(type(type(X)))            --string
</code></pre><p>最后一行将永远返回“string”，而无关乎X这个值的内容，这是因为type函数总是返回一个字符串。</p>
<p>变量没有预定义的类型，任何变量都可以包含任何类型的值：</p>
<pre><code>print(type(a))          --nil
a = 10
print(type(a))          --number
a = &quot;a string&quot;
print(type(a))          --string
a = print
a(type(a))              --function
</code></pre><p>将一个变量用于不同类型，通常会导致代码混乱，但有时明智地使用这种特性会带来便利。</p>
<h2 id="nil（空）"><a href="#nil（空）" class="headerlink" title="nil（空）"></a>nil（空）</h2><p>nil是一种类型，只有一个值nil，它的主要功能是用于区别其他任何值。一个全局变量在第一次赋值前的默认值就是nil，将nil赋予一个全局变量等同于删除它。Lua将nil用于表示一种无效值的情况，也就是没有任何有效值的情况。</p>
<h2 id="boolean（布尔）"><a href="#boolean（布尔）" class="headerlink" title="boolean（布尔）"></a>boolean（布尔）</h2><p>boolean类型有两个可选值：false和true，在Lua中任何值都可以表示一个条件。Lua将false和nil视为假，其他值全为真，Lua在条件测试中，将数字零和空字符串也都视为真</p>
<h2 id="number（数字）"><a href="#number（数字）" class="headerlink" title="number（数字）"></a>number（数字）</h2><p>number类型用于表示双精度浮点数，支持科学计数法：0.3e12</p>
<h2 id="string（字符串）"><a href="#string（字符串）" class="headerlink" title="string（字符串）"></a>string（字符串）</h2><p>Lua中的字符串通常表示“一个字符序列”。可以将任意二进制数据存储到一个字符串中。Lua的字符串是不可变的值，不能直接修改字符串的某个字符，而是根据修改要求来创建一个新的字符串。</p>
<pre><code>a=&quot;Hello world&quot;
b=string.gsub(a,&quot;world&quot;,&quot;lua&quot;)      --修改字符串的一部分
c=string.gsub(a,&quot;o&quot;,&quot;c&quot;)
print(a)                            --Hello world
print(b)                            --Hello lua
print(c)                            --Hellc wcrld
</code></pre><p>string的gsub函数修改所有匹配到的子串。<br>Lua的字符串和其他Lua对象一样，都是自动内存管理机制所管理的对象。以一对匹配的单引号或者双引号来界定字符串，根据编程风格，应该坚持在程序中使用相同类型的引号，如果字符串本身包含引号，那么使用转义序列</p>
<p><img src="https://img-
blog.csdn.net/20170313192419753?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjY5OTk1MDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>Lua字符串中的转义序列</p>
<p>还可以通过数值来指定字符串中的字符，数值以转义序列“\”给出，其中是一个至多3个十进制数字组成的序列。例如：<br>“alo\n123\””与字符串”\97lo\10\04923”是相同的，在ASCII中，’a’的ASCII编码是97，换行是10，’1’的编码是49.这里必须将49写成三个数字049，不然Lua会读取到数值492.</p>
<p>另外，可以用一对匹配的双方括号来界定一个字母字符串，就像写“块注释”那样，不过Lua不会解释其中的转义序列，并且会忽略第一个字符是换行字符的部分，这种写法对于书写那种含有程序代码的字符串尤为有用。</p>
<pre><code>page=[[
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;an html page&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;a href=&quot;http://www.lua.org&quot;&gt;lua&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;]]
print(page)
print(type(page))                   --string
</code></pre><p>Lua提供了运行时的数字与字符串的自动转换。在一个字符串上应用算术操作时，Lua会尝试将这个字符串转换成一个数字:</p>
<pre><code>print(&quot;10&quot; + 1)         --11
print(&quot;10+1&quot;)           --10+1
print(&quot;hello&quot; + 1)      --报错，不能将string字符串转换成一个数字
</code></pre><p>在Lua期望一个字符串但却得到一个数字时，它也会将数字转换成字符串：</p>
<pre><code>a=10 .. 20
print(10 .. 20)         --1020
print(a)                --1020
print(type(a))          --string
</code></pre><p>在Lua中，“..”是字符串连接操作符，记得该操作符与数字之间必须要用空格来分隔，不然Lua会将第一个点理解为一个小数点。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jingfengji.github.io/2016/12/29/Unity之事件机制/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.Ding">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JingFengJi">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/12/29/Unity之事件机制/" class="post-title-link" itemprop="url">Unity之事件机制</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-12-29 15:52:14" itemprop="dateCreated datePublished" datetime="2016-12-29T15:52:14+08:00">2016-12-29</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-11 22:05:12" itemprop="dateModified" datetime="2019-03-11T22:05:12+08:00">2019-03-11</time>
              
            
          </span>

          

          
            
            
          

          
          
            <span id="/2016/12/29/Unity之事件机制/" class="leancloud_visitors" data-flag-title="Unity之事件机制">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">Views: </span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <meta name="referrer" content="no-referrer">

<p>事件机制主要用于模块之间解耦和，事件机制将各个模块联系在一起，并且它们之间的耦合性非常低，特别适用于游戏产品的模块化开发。事件的类型可以通过枚举的形式来表示。事件机制的实现原理是将表示不同事件的枚举与其对应的回调函数通过AddListener函数加到定义好的表中，触发回调函数通过notify函数对已定义的事件枚举进行分类分发，从发触发已加载到内存的事件回调函数。等开发者不需要监听事件可通过RemoveListener函数移除监听即可。</p>
<p>下面给出一个Demo的UnityPackage的链接：<br>链接： <a href="http://pan.baidu.com/s/1c1LOD4O" target="_blank" rel="noopener"> http://pan.baidu.com/s/1c1LOD4O </a><br>密码：y4fv</p>
<p>链接如有失效，联系博主及时更新。</p>
<p>以上知识分享，如有错误，欢迎指出，共同学习，共同进步。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jingfengji.github.io/2016/12/14/Unity之私人订制Debug/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.Ding">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JingFengJi">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/12/14/Unity之私人订制Debug/" class="post-title-link" itemprop="url">Unity之私人订制Debug</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-12-14 18:20:38" itemprop="dateCreated datePublished" datetime="2016-12-14T18:20:38+08:00">2016-12-14</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-11 22:05:14" itemprop="dateModified" datetime="2019-03-11T22:05:14+08:00">2019-03-11</time>
              
            
          </span>

          

          
            
            
          

          
          
            <span id="/2016/12/14/Unity之私人订制Debug/" class="leancloud_visitors" data-flag-title="Unity之私人订制Debug">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">Views: </span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <meta name="referrer" content="no-referrer">

<p>其实原理很简单，这里用到的是富文本的知识，也许大家会觉得这种low定制反而显得麻烦了，那就直接跳过。。。</p>
<p>直接上代码：</p>
<pre><code>using UnityEngine;
using System.Collections;
using System;
using System.Text;

namespace Scripts.CoreScripts.Core.Helper
{
    public class Debugger
    {
        /// &lt;summary&gt;
        /// 是否开启Debugger
        /// &lt;/summary&gt;
        static public bool Enable = true;

        /// &lt;summary&gt;
        /// 默认错误颜色：红色
        /// &lt;/summary&gt;
        static public string ErrorColor = &quot;red&quot;;

        /// &lt;summary&gt;
        /// 默认警告颜色：黄色
        /// &lt;/summary&gt;
        static public string WarningColor = &quot;yellow&quot;;

        /// &lt;summary&gt;
        /// 默认输出颜色：白色
        /// &lt;/summary&gt;
        static public string LogColor = &quot;white&quot;;

        /// &lt;summary&gt;
        /// 默认字号：20
        /// &lt;/summary&gt;
        static public int FontSize = 20;

        /// &lt;summary&gt;
        /// 默认颜色，默认字号输出
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;message&quot;&gt;输出内容&lt;/param&gt;
        static public void Log(object message)
        {
            if (Enable)
            {
                Debug.Log(&quot;&lt;color=&quot; + LogColor + &quot;&gt;&quot; + &quot;&lt;size=&quot; + FontSize + &quot;&gt;&quot; + message + &quot;&lt;/size&gt;&quot; + &quot;&lt;/color&gt;&quot;);
            }
        }

        /// &lt;summary&gt;
        /// 默认颜色，默认字号输出
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;message&quot;&gt;输出内容&lt;/param&gt;
        /// &lt;param name=&quot;context&quot;&gt;连接上下文&lt;/param&gt;
        static public void Log(object message, UnityEngine.Object context)
        {
            if (Enable)
            {
                Debug.Log(&quot;&lt;color=&quot; + LogColor + &quot;&gt;&quot; + &quot;&lt;size=&quot; + FontSize + &quot;&gt;&quot; + message + &quot;&lt;/size&gt;&quot; + &quot;&lt;/color&gt;&quot;, context);
            }
        }

        /// &lt;summary&gt;
        /// 自定义颜色输出
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;message&quot;&gt;输出内容&lt;/param&gt;
        /// &lt;param name=&quot;color&quot;&gt;颜色&lt;/param&gt;
        static public void Log(object message, Color32 color)
        {
            if (Enable)
            {
                Debug.Log(&quot;&lt;color=&quot; + FormatColor32(color) + &quot;&gt;&quot; + message + &quot;&lt;/color&gt;&quot;);
            }
        }

        /// &lt;summary&gt;
        /// 自定义颜色、默认字号输出
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;message&quot;&gt;输出内容&lt;/param&gt;
        /// &lt;param name=&quot;color&quot;&gt;颜色&lt;/param&gt;
        /// &lt;param name=&quot;context&quot;&gt;连接上下文&lt;/param&gt;
        static public void Log(object message, Color32 color, UnityEngine.Object context)
        {
            if (Enable)
            {
                Debug.Log(&quot;&lt;color=&quot; + FormatColor32(color) + &quot;&gt;&quot; + &quot;&lt;size=&quot; + FontSize + &quot;&gt;&quot; + message + &quot;&lt;/size&gt;&quot; + &quot;&lt;/color&gt;&quot;, context);
            }
        }

        /// &lt;summary&gt;
        /// 自定义字号输出
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;message&quot;&gt;输出内容&lt;/param&gt;
        /// &lt;param name=&quot;fontSize&quot;&gt;字号大小，汉字上限26，大写英文上限30，小写英文上限25，仅供参考&lt;/param&gt;
        static public void Log(object message, int fontSize)
        {
            if (Enable)
            {
                Debug.Log(&quot;&lt;color=&quot; + LogColor + &quot;&gt;&quot; + &quot;&lt;size=&quot; + FontSize + &quot;&gt;&quot; + message + &quot;&lt;/size&gt;&quot; + &quot;&lt;/color&gt;&quot;);
            }
        }

        /// &lt;summary&gt;
        /// 自定义字号输出
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;message&quot;&gt;输出内容&lt;/param&gt;
        /// &lt;param name=&quot;fontSize&quot;&gt;字号&lt;/param&gt;
        /// &lt;param name=&quot;context&quot;&gt;连接上下文&lt;/param&gt;
        static public void Log(object message, int fontSize, UnityEngine.Object context)
        {
            if (Enable)
            {
                Debug.Log(&quot;&lt;size=&quot; + fontSize + &quot;&gt;&quot; + message + &quot;&lt;/size&gt;&quot;, context);
            }
        }

        /// &lt;summary&gt;
        /// 自定义字号、颜色输出
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;message&quot;&gt;输出内容&lt;/param&gt;
        /// &lt;param name=&quot;color&quot;&gt;颜色&lt;/param&gt;
        /// &lt;param name=&quot;fontsize&quot;&gt;字号&lt;/param&gt;
        static public void Log(object message, Color32 color, int fontsize)
        {
            if (Enable)
            {
                Debug.Log(&quot;&lt;color=&quot; + FormatColor32(color) + &quot;&gt;&quot; + &quot;&lt;size=&quot; + fontsize + &quot;&gt;&quot; + message + &quot;&lt;/size&gt;&quot; + &quot;&lt;/color&gt;&quot;);
            }
        }

        /// &lt;summary&gt;
        /// 自定义字号、颜色输出
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;message&quot;&gt;输出内容&lt;/param&gt;
        /// &lt;param name=&quot;color&quot;&gt;颜色&lt;/param&gt;
        /// &lt;param name=&quot;fontSize&quot;&gt;字号&lt;/param&gt;
        /// &lt;param name=&quot;context&quot;&gt;连接上下文&lt;/param&gt;
        static public void Log(object message, Color32 color, int fontSize, UnityEngine.Object context)
        {
            if (Enable)
            {
                Debug.Log(&quot;&lt;color=&quot; + FormatColor32(color) + &quot;&gt;&quot; + &quot;&lt;size=&quot; + fontSize + &quot;&gt;&quot; + message + &quot;&lt;/size&gt;&quot; + &quot;&lt;/color&gt;&quot;, context);
            }
        }

        static public void LogWarning(object message)
        {
            if (Enable)
            {
                Debug.LogWarning(&quot;&lt;color=&quot; + WarningColor + &quot;&gt;&quot; + message + &quot;&lt;/color&gt;&quot;);
            }
        }

        static public void LogWarning(object message, UnityEngine.Object context)
        {
            if (Enable)
            {
                Debug.LogWarning(&quot;&lt;color=&quot; + WarningColor + &quot;&gt;&quot; + message + &quot;&lt;/color&gt;&quot;, context);
            }
        }

        static public void LogError(object message)
        {
            if (Enable)
            {
                Debug.LogError(&quot;&lt;color=&quot; + ErrorColor + &quot;&gt;&quot; + message + &quot;&lt;/color&gt;&quot;);
            }
        }

        static public void LogError(object message, UnityEngine.Object context)
        {
            if (Enable)
            {
                Debug.LogError(&quot;&lt;color=&quot; + ErrorColor + &quot;&gt;&quot; + message + &quot;&lt;/color&gt;&quot;, context);
            }
        }

        /// &lt;summary&gt;
        /// 将Color32转换为#FFFFFFFF格式
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;color&quot;&gt;&lt;/param&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        static private string FormatColor32(Color32 color)
        {
            StringBuilder sb = new StringBuilder();
            sb.Append(&quot;#&quot;);
            sb.Append(color.r.ToString(&quot;x2&quot;));
            sb.Append(color.g.ToString(&quot;x2&quot;));
            sb.Append(color.b.ToString(&quot;x2&quot;));
            sb.Append(color.a.ToString(&quot;x2&quot;));
            return sb.ToString();
        }
    }
}
</code></pre><p>以上知识分享，如有错误，欢迎指出，共同学习，共同进步。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jingfengji.github.io/2016/12/13/Unity之Vector3D：重现Vector3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.Ding">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JingFengJi">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/12/13/Unity之Vector3D：重现Vector3/" class="post-title-link" itemprop="url">Unity之Vector3D：重现Vector3</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-12-13 12:15:43" itemprop="dateCreated datePublished" datetime="2016-12-13T12:15:43+08:00">2016-12-13</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-11 22:02:15" itemprop="dateModified" datetime="2019-03-11T22:02:15+08:00">2019-03-11</time>
              
            
          </span>

          

          
            
            
          

          
          
            <span id="/2016/12/13/Unity之Vector3D：重现Vector3/" class="leancloud_visitors" data-flag-title="Unity之Vector3D：重现Vector3">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">Views: </span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <meta name="referrer" content="no-referrer">

<p>直接上代码</p>
<pre><code>using System;
using System.Text;
using UnityEngine;

public class Vector3D
{

    public static Vector3D back
    {
        get
        {
            return new Vector3D(0, 0, -1);
        }
    }

    public static Vector3D down
    {
        get
        {
            return new Vector3D(0, -1, 0);
        }
    }

    public static Vector3D forward
    {
        get
        {
            return new Vector3D(0, 0, 1);
        }
    }

    public static Vector3D left
    {
        get
        {
            return new Vector3D(-1, 0, 0);
        }
    }

    public static Vector3D right
    {
        get
        {
            return new Vector3D(1, 0, 0);
        }
    }

    public static Vector3D up
    {
        get
        {
            return new Vector3D(0, 1, 0);
        }
    }

    public static Vector3D one
    {
        get
        {
            return new Vector3D(1, 1, 1);
        }
    }

    public static Vector3D zero
    {
        get
        {
            return new Vector3D(0, 0, 0);
        }
    }

    /// &lt;summary&gt;
    /// 向量的长度
    /// &lt;/summary&gt;
    public float magnitude
    {
        get
        {
            return (float)Math.Sqrt(sqrMagnitudfe);
        }
    }

    /// &lt;summary&gt;
    /// 向量的的长度的平方
    /// &lt;/summary&gt;
    public float sqrMagnitudfe
    {
        get
        {
            return x * x + y * y + z * z;
        }
    }

    /// &lt;summary&gt;
    /// 规范化
    /// &lt;/summary&gt;
    public Vector3D normalized
    {
        get
        {
            if (IsZero)
            {
                return Vector3D.zero;
            }
            else
            {
                Vector3D v = new Vector3D();
                float length = magnitude;
                v.x = this.x / length;
                v.y = this.y / length;
                v.z = this.z / length;
                return v;
            }
        }
    }

    /// &lt;summary&gt;
    /// 是否是零向量
    /// &lt;/summary&gt;
    public bool IsZero
    {
        get
        {
            return this.x == 0 &amp;&amp; this.y == 0 &amp;&amp; this.z == 0;
        }
    }

    #region 操作符重载

    /// &lt;summary&gt;
    /// 两个向量相加
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;a&quot;&gt;向量a&lt;/param&gt;
    /// &lt;param name=&quot;b&quot;&gt;向量b&lt;/param&gt;
    /// &lt;returns&gt;两个向量的和&lt;/returns&gt;
    public static Vector3D operator +(Vector3D a,Vector3D b)
    {
        return new Vector3D(a.x + b.x, a.y + b.y, a.z + b.z);
    }

    /// &lt;summary&gt;
    /// 两个向量相减
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;a&quot;&gt;向量a&lt;/param&gt;
    /// &lt;param name=&quot;b&quot;&gt;向量b&lt;/param&gt;
    /// &lt;returns&gt;两个向量的差&lt;/returns&gt;
    public static Vector3D operator -(Vector3D a,Vector3D b)
    {
        return new Vector3D(a.x - b.x, a.y - b.y, a.z - b.z);
    }

    /// &lt;summary&gt;
    /// 向量取反
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;a&quot;&gt;向量a&lt;/param&gt;
    /// &lt;returns&gt;向量a的反向量&lt;/returns&gt;
    public static Vector3D operator -(Vector3D a)
    {
        return new Vector3D(-a.x, -a.y, -a.z);
    }

    /// &lt;summary&gt;
    /// 一个数乘以一个向量
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;d&quot;&gt;一个数&lt;/param&gt;
    /// &lt;param name=&quot;a&quot;&gt;一个向量&lt;/param&gt;
    /// &lt;returns&gt;返回数与向量的乘积&lt;/returns&gt;
    public static Vector3D operator *(float d, Vector3D a)
    {
        return new Vector3D(a.x * d, a.y * d, a.z * d);
    }

    /// &lt;summary&gt;
    /// 一个向量乘以一个数
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;a&quot;&gt;一个向量&lt;/param&gt;
    /// &lt;param name=&quot;d&quot;&gt;一个数&lt;/param&gt;
    /// &lt;returns&gt;返回向量与数的乘积&lt;/returns&gt;
    public static Vector3D operator *(Vector3D a, float d)
    {
        return new Vector3D(a.x * d, a.y * d, a.z * d);
    }

    /// &lt;summary&gt;
    /// 一个数除一个向量，向量a/数b
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;a&quot;&gt;一个向量&lt;/param&gt;
    /// &lt;param name=&quot;d&quot;&gt;一个数&lt;/param&gt;
    /// &lt;returns&gt;返回向量a/d&lt;/returns&gt;
    public static Vector3D operator /(Vector3D a,float d)
    {
        return new Vector3D(a.x / d, a.y / d, a.z / d);
    }

    /// &lt;summary&gt;
    /// 两个向量是否相等
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;lhs&quot;&gt;向量lhs&lt;/param&gt;
    /// &lt;param name=&quot;rhs&quot;&gt;向量rhs&lt;/param&gt;
    /// &lt;returns&gt;如果相等，则为true，否则为false&lt;/returns&gt;
    public static bool operator ==(Vector3D lhs, Vector3D rhs)
    {
        bool x = Math.Abs(lhs.x - rhs.x) &lt; 0.00001f;
        bool y = Math.Abs(lhs.y - rhs.y) &lt; 0.00001f;
        bool z = Math.Abs(lhs.z - rhs.z) &lt; 0.00001f;
        return x &amp;&amp; y &amp;&amp; z;
    }

    /// &lt;summary&gt;
    /// 两个向量是否不等
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;lhs&quot;&gt;向量lhs&lt;/param&gt;
    /// &lt;param name=&quot;rhs&quot;&gt;向量rhs&lt;/param&gt;
    /// &lt;returns&gt;如果不等，则为true，否则为false&lt;/returns&gt;
    public static bool operator !=(Vector3D lhs, Vector3D rhs)
    {
        return !(lhs == rhs);
    }

    #endregion

    public float x;
    public float y;
    public float z;

    private float[] data = new float[3];

    #region 构造器
    public Vector3D()
    {
        this.x = 0.0f;
        this.y = 0.0f;
        this.z = 0.0f;

        data[0] = 0.0f;
        data[1] = 0.0f;
        data[2] = 0.0f;
    }

    public Vector3D(float x, float y)
    {
        this.x = x;
        this.y = y;
        this.z = 1.0f;

        data[0] = 0.0f;
        data[1] = 0.0f;
        data[2] = 1.0f;
    }

    public Vector3D(float x, float y, float z)
    {
        this.x = x;
        this.y = y;
        this.z = z;

        data[0] = x;
        data[1] = y;
        data[2] = z;
    }

    #endregion

    public float this[int index]
    {
        get
        {
            switch (index)
            {
                case 0:
                    return this.x;
                case 1:
                    return this.y;
                case 2:
                    return this.z;
                default:
                    throw new Exception(&quot;index is out of array&quot;);
            }
        }
        set
        {
            data[index] = value;
            switch (index)
            {
                case 0:
                    this.x = value;
                    break;
                case 1:
                    this.y = value;
                    break;
                case 2:
                    this.z = value;
                    break;
                default:
                    break;
            }
        }
    }

    public override string ToString()
    {
        StringBuilder sb = new StringBuilder();
        sb.Append(&quot;(&quot;);
        sb.Append(this.x);
        sb.Append(&quot;,&quot;);
        sb.Append(this.y);
        sb.Append(&quot;,&quot;);
        sb.Append(this.z);
        sb.Append(&quot;)&quot;);
        return sb.ToString();
    }

    public void Set(float new_x, float new_y, float new_z)
    {
        this.x = new_x;
        this.y = new_y;
        this.z = new_z;
        data[0] = new_x;
        data[1] = new_y;
        data[2] = new_z;
    }

    /// &lt;summary&gt;
    /// 规范化，使向量长度为1
    /// &lt;/summary&gt;
    public void Normalize()
    {
        if (!IsZero)
        {
            this.x /= magnitude;
            this.y /= magnitude;
            this.z /= magnitude;
        }
    }

    #region 静态函数

    /// &lt;summary&gt;
    /// 距离
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;a&quot;&gt;&lt;/param&gt;
    /// &lt;param name=&quot;b&quot;&gt;&lt;/param&gt;
    /// &lt;returns&gt;返回a和b之间的距离&lt;/returns&gt;
    public static float Distance(Vector3D a, Vector3D b)
    {
        return (float)Math.Sqrt((a.x - b.x) * (a.x - b.x) + (a.y - b.y) * (a.y - b.y) + (a.z - b.z) * (a.z - b.z));
    }

    /// &lt;summary&gt;
    /// 计算两个向量的点乘积
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;lhs&quot;&gt;&lt;/param&gt;
    /// &lt;param name=&quot;rhs&quot;&gt;&lt;/param&gt;
    /// &lt;returns&gt;&lt;/returns&gt;
    public static float Dot(Vector3D lhs, Vector3D rhs)
    {
        return lhs.x * rhs.x + lhs.y * rhs.y + lhs.z * rhs.z;
    }

    /// &lt;summary&gt;
    /// 计算两个向量的叉乘
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;v1&quot;&gt;&lt;/param&gt;
    /// &lt;param name=&quot;v2&quot;&gt;&lt;/param&gt;
    /// &lt;returns&gt;&lt;/returns&gt;
    public static Vector3D Cross(Vector3D v1, Vector3D v2)
    {
        float x = v1.y * v2.z - v2.y * v1.z;
        float y = v1.z * v2.x - v2.z * v1.x;
        float z = v1.x * v2.y - v2.x * v1.y;
        return new Vector3D(x, y, z);
    }

    /// &lt;summary&gt;
    /// 限制长度
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;v&quot;&gt;向量v&lt;/param&gt;
    /// &lt;param name=&quot;maxLength&quot;&gt;最长长度&lt;/param&gt;
    /// &lt;returns&gt;返回限制长度后的向量&lt;/returns&gt;
    public static Vector3D ClampMagnitude(Vector3D v,float maxLength)
    {
        if (maxLength &gt;= v.magnitude)
        {
            return v;
        }

        return (maxLength / v.magnitude) * v;
    }

    /// &lt;summary&gt;
    /// 计算两个向量的夹角
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;from&quot;&gt;&lt;/param&gt;
    /// &lt;param name=&quot;to&quot;&gt;&lt;/param&gt;
    /// &lt;returns&gt;&lt;/returns&gt;
    public static float Angle(Vector3D from,Vector3D to)
    {
        float dot = Dot(from, to);
        return (float)(180 * Math.Acos(dot / (from.magnitude * to.magnitude)) / Math.PI);
    }

    /// &lt;summary&gt;
    /// 投射一个向量到另一个向量
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;vector&quot;&gt;&lt;/param&gt;
    /// &lt;param name=&quot;onNormal&quot;&gt;&lt;/param&gt;
    /// &lt;returns&gt;返回被投射到onNormal的vector&lt;/returns&gt;
    public static Vector3D Project(Vector3D vector, Vector3D onNormal)
    {
        if (vector.IsZero || onNormal == Vector3D.zero)
        {
            return Vector3D.zero;
        }
        return Dot(vector, onNormal) / (onNormal.magnitude * onNormal.magnitude) * onNormal;
    }

    /// &lt;summary&gt;
    /// 反射
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;inDirection&quot;&gt;&lt;/param&gt;
    /// &lt;param name=&quot;inNormal&quot;&gt;&lt;/param&gt;
    /// &lt;returns&gt;&lt;/returns&gt;
    public static Vector3D Reflect(Vector3D inDirection,Vector3D inNormal)
    {
        return Vector3D.zero;
    }

    /// &lt;summary&gt;
    /// 缩放
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;scale&quot;&gt;&lt;/param&gt;
    public void Scale(Vector3D scale)
    {
        this.x *= scale.x;
        this.y *= scale.y;
        this.z *= scale.z;
    }
    /// &lt;summary&gt;
    /// 缩放
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;a&quot;&gt;&lt;/param&gt;
    /// &lt;param name=&quot;b&quot;&gt;&lt;/param&gt;
    /// &lt;returns&gt;&lt;/returns&gt;
    public static Vector3D Scale(Vector3D a,Vector3D b)
    {
        return new Vector3D(a.x * b.x, a.y * b.y, a.z * b.z);
    }

    /// &lt;summary&gt;
    /// 两个向量是否平行
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;a&quot;&gt;&lt;/param&gt;
    /// &lt;param name=&quot;b&quot;&gt;&lt;/param&gt;
    /// &lt;returns&gt;&lt;/returns&gt;
    public static bool Parallel(Vector3D a, Vector3D b)
    {
        return Cross(a,b).IsZero;
    }

    /// &lt;summary&gt;
    /// 两个向量之间的线性插值
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;from&quot;&gt;向量from&lt;/param&gt;
    /// &lt;param name=&quot;to&quot;&gt;向量to&lt;/param&gt;
    /// &lt;param name=&quot;t&quot;&gt;&lt;/param&gt;
    /// &lt;returns&gt;&lt;/returns&gt;
    public static Vector3D Lerp(Vector3D from, Vector3D to, float t)
    {
        if (t &lt;= 0)
        {
            return from;
        }
        else if (t &gt;= 1)
        {
            return to;
        }
        return t * to + (1 - t) * from;
    }

    /// &lt;summary&gt;
    /// 两个向量的球形插值
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;a&quot;&gt;向量a&lt;/param&gt;
    /// &lt;param name=&quot;b&quot;&gt;向量b&lt;/param&gt;
    /// &lt;param name=&quot;t&quot;&gt;t的值在[0..1]&lt;/param&gt;
    /// &lt;returns&gt;&lt;/returns&gt;
    public static Vector3D Slerp(Vector3D a, Vector3D b, float t)
    {
        if (t &lt;= 0)
        {
            return a;
        }
        else if (t &gt;= 1)
        {
            return b;
        }

        Vector3D v = RotateTo(a, b, Vector3D.Angle(a, b) * t);

        //向量的长度，跟线性插值一样计算
        float length = b.magnitude * t + a.magnitude * (1 - t);
        return v.normalized * length;
    }

    /// &lt;summary&gt;
    /// 将向量from向向量to旋转角度angle
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;from&quot;&gt;&lt;/param&gt;
    /// &lt;param name=&quot;to&quot;&gt;&lt;/param&gt;
    /// &lt;param name=&quot;angle&quot;&gt;&lt;/param&gt;
    /// &lt;returns&gt;&lt;/returns&gt;
    public static Vector3D RotateTo(Vector3D from, Vector3D to, float angle)
    {
        //如果两向量角度为0
        if (Vector3D.Angle(from, to) == 0)
        {
            return from;
        }

        //旋转轴
        Vector3D n = Vector3D.Cross(from, to);
        n.Normalize();

        //旋转矩阵
        Matrix4x4 rotateMatrix = new Matrix4x4();

        //旋转的弧度
        double radian = angle * Math.PI / 180;
        float cosAngle = (float)Math.Cos(radian);
        float sinAngle = (float)Math.Sin(radian);
        rotateMatrix.SetRow(0, new Vector4(n.x * n.x * (1 - cosAngle) + cosAngle, n.x * n.y * (1 - cosAngle) + n.z * sinAngle, n.x * n.z * (1 - cosAngle) - n.y * sinAngle, 0));
        rotateMatrix.SetRow(1, new Vector4(n.x * n.y * (1 - cosAngle) - n.z * sinAngle, n.y * n.y * (1 - cosAngle) + cosAngle, n.y * n.z * (1 - cosAngle) + n.x * sinAngle, 0));
        rotateMatrix.SetRow(2, new Vector4(n.x * n.z * (1 - cosAngle) + n.y * sinAngle, n.y * n.z * (1 - cosAngle) - n.x * sinAngle, n.z * n.z * (1 - cosAngle) + cosAngle, 0));
        rotateMatrix.SetRow(3, new Vector4(0, 0, 0, 1));

        Vector4 v = Vector3D.ToVector4(from);
        Vector3D vector = new Vector3D();
        for (int i = 0; i &lt; 3; ++i)
        {
            for (int j = 0; j &lt; 3; j++)
            {
                vector[i] += v[j] * rotateMatrix[j, i];
            }
        }
        return vector;
    }

    /// &lt;summary&gt;
    /// 将一个Vector3D转换为Vector4
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;v&quot;&gt;&lt;/param&gt;
    /// &lt;returns&gt;&lt;/returns&gt;
    public static Vector4 ToVector4(Vector3D v)
    {
        return new Vector4(v.x, v.y, v.z, 0);
    }

    public Vector3 ToVector3()
    {
        return new Vector3(x, y, z);
    }

    #endregion
}
</code></pre><p>以上代码只是自己在学习过程中一点成果，希望对大家有帮助，当然跟Vector3比起来肯定差很多。</p>
<p>以上知识分享，如有错误，欢迎指出，共同学习，共同进步。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jingfengji.github.io/2016/12/13/Unity之Vector3.Lerp线性插值原理介绍/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.Ding">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JingFengJi">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/12/13/Unity之Vector3.Lerp线性插值原理介绍/" class="post-title-link" itemprop="url">Unity之Vector3.Lerp线性插值原理介绍</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-12-13 11:56:41" itemprop="dateCreated datePublished" datetime="2016-12-13T11:56:41+08:00">2016-12-13</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-11 22:01:39" itemprop="dateModified" datetime="2019-03-11T22:01:39+08:00">2019-03-11</time>
              
            
          </span>

          

          
            
            
          

          
          
            <span id="/2016/12/13/Unity之Vector3.Lerp线性插值原理介绍/" class="leancloud_visitors" data-flag-title="Unity之Vector3.Lerp线性插值原理介绍">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">Views: </span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <meta name="referrer" content="no-referrer">

<p>先看下面这个图：<br><img src="https://img-blog.csdn.net/20161213114512329?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjY5OTk1MDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>画的比较潦草，大家将就看。。。</p>
<p>向量from 和 向量to在xy平面上，其实这并不影响讲解插值原理。</p>
<p>图中可以看出当t=0.5f时，插值向量就是中间那个向量，其x轴分量的计算图中已经给出了，y轴也同理，z轴也一样。。</p>
<p>下面看下函数：<br>public static Vector3 Lerp(Vector3 a, Vector3 b, float t);</p>
<p>其中a就是图中的from向量，b就是to向量。<br>t是夹在 [0…1]之间，当t = 0时，返回from，当t = 1时，返回to。当t = 0.5 返回from和to的平均数</p>
<p>所以具体实现代码如下：</p>
<pre><code>/// &lt;summary&gt;
/// 两个向量之间的线性插值
/// &lt;/summary&gt;
/// &lt;param name=&quot;from&quot;&gt;向量from&lt;/param&gt;
/// &lt;param name=&quot;to&quot;&gt;向量to&lt;/param&gt;
/// &lt;param name=&quot;t&quot;&gt;&lt;/param&gt;
/// &lt;returns&gt;&lt;/returns&gt;
public static Vector3D Lerp(Vector3D from, Vector3D to, float t)
{
    if (t &lt;= 0)
    {
        return from;
    }
    else if (t &gt;= 1)
    {
        return to;
    }
    return t * to + (1 - t) * from;
}
</code></pre><p>线性插值比Slerp球形插值简单的多。</p>
<p>以上知识分享，如有错误，欢迎指出，共同学习，共同进步。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jingfengji.github.io/2016/12/09/Unity之Vector3.Slerp球形插值原理介绍/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.Ding">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JingFengJi">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/12/09/Unity之Vector3.Slerp球形插值原理介绍/" class="post-title-link" itemprop="url">Unity之Vector3.Slerp球形插值原理介绍</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-12-09 20:34:57" itemprop="dateCreated datePublished" datetime="2016-12-09T20:34:57+08:00">2016-12-09</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-11 22:02:08" itemprop="dateModified" datetime="2019-03-11T22:02:08+08:00">2019-03-11</time>
              
            
          </span>

          

          
            
            
          

          
          
            <span id="/2016/12/09/Unity之Vector3.Slerp球形插值原理介绍/" class="leancloud_visitors" data-flag-title="Unity之Vector3.Slerp球形插值原理介绍">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">Views: </span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <meta name="referrer" content="no-referrer">

<p>先看API：<br>public static Vector3 Slerp(Vector3 a, Vector3 b, float t);<br>介绍：通过t数值在from和to之间插值。返回的向量的长度将被插值到from到to的长度之间。<br>先上一个示意图：<br><img src="https://img-blog.csdn.net/20161209112110583?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjY5OTk1MDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>上图的代码如下：</p>
<pre><code>private Vector3 mStart = new Vector3(-1, 1, 0);
private Vector3 mEnd = new Vector3(1, 1, 0);

// Update is called once per frame
private void Update()
{
    //绘制坐标轴
    Debug.DrawLine(new Vector3(-100, 0, 0), new Vector3(100, 0, 0), Color.green);
    Debug.DrawLine(new Vector3(0, -100, 0), new Vector3(0, 100, 0), Color.green);
    Debug.DrawLine(new Vector3(0, 0, -100), new Vector3(0, 0, 100), Color.green);

    Debug.DrawLine(Vector3.zero, mStart, Color.red);
    Debug.DrawLine(Vector3.zero, mEnd, Color.red);
    Debug.DrawLine(mStart, mEnd, Color.red);
    for (int i = 1; i &lt; 10; ++i)
    {
        Vector3 drawVec = Vector3.Slerp(mStart, mEnd, 0.1f * i);
        Debug.DrawLine(Vector3.zero, drawVec, Color.yellow);

    }
}
</code></pre><p>下面先做几次实验来验证下面两个猜想：<br>1、猜想一：插值的向量的长度是均匀线性变化的<br>2、猜想二：插值的向量之间的角度是一样大的</p>
<p>上图验证：<br>实验一：我们在上面代码的基础上加上输出：</p>
<pre><code>//加在for循环里
Debug.Log(&quot;插值向量长度：&quot;+ drawVec.magnitude);
Debug.Log(&quot;角度：&quot; + Vector3.Angle(drawVec, mStart) / i);
</code></pre><p><img src="https://img-blog.csdn.net/20161209112850532?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjY5OTk1MDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>我们发现虽然有误差，但是猜想基本成立，我们修改mStart和mEnd两向量继续实验。</p>
<p>实验二：mStart = (-1,0,0) mEnd = (0,3,4)<br><img src="https://img-blog.csdn.net/20161209113159037?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjY5OTk1MDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>从上面可以看出两个猜想成立</p>
<p>这里额外要验证一个问题，就是当两个向量为平行向量时，结果如下，下面直接看图：<br>（1）mStart = (-1, 0, 0) mEnd = (1, 0, 0)<br><img src="https://img-blog.csdn.net/20161209114817399?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjY5OTk1MDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>（2）mStart = (-1, 1, 0) mEnd = (1, -1, 0)<br><img src="https://img-blog.csdn.net/20161209115239713?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjY5OTk1MDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>（3）mStart = (-1, 1, 1) mEnd = (1, -1, -1)<br><img src="https://img-blog.csdn.net/20161209134923381?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjY5OTk1MDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>那么现在就可以利用这几个结论来自实现Slerp插值了。</p>
<p>下面直接上代码：<br>代码关键内容如下：<br>（1）旋转向量函数<br>（2）旋转矩阵</p>
<pre><code>/// &lt;summary&gt;
/// 两个向量的球形插值
/// &lt;/summary&gt;
/// &lt;param name=&quot;a&quot;&gt;向量a&lt;/param&gt;
/// &lt;param name=&quot;b&quot;&gt;向量b&lt;/param&gt;
/// &lt;param name=&quot;t&quot;&gt;t的值在[0..1]&lt;/param&gt;
/// &lt;returns&gt;&lt;/returns&gt;
public static Vector3D Slerp(Vector3D a, Vector3D b, float t)
{
    if (t &lt;= 0)
    {
        return a;
    }
    else if (t &gt;= 1)
    {
        return b;
    }

    Vector3D v = RotateTo(a, b, Vector3D.Angle(a, b) * t);

    //向量的长度，跟线性插值一样计算
    float length = b.magnitude * t + a.magnitude * (1 - t);
    return v.normalized * length;
}

/// &lt;summary&gt;
/// 将向量from向向量to旋转角度angle
/// &lt;/summary&gt;
/// &lt;param name=&quot;from&quot;&gt;&lt;/param&gt;
/// &lt;param name=&quot;to&quot;&gt;&lt;/param&gt;
/// &lt;param name=&quot;angle&quot;&gt;&lt;/param&gt;
/// &lt;returns&gt;&lt;/returns&gt;
public static Vector3D RotateTo(Vector3D from, Vector3D to, float angle)
{
    //如果两向量角度为0
    if (Vector3D.Angle(from, to) == 0)
    {
        return from;
    }

    //旋转轴
    Vector3D n = Vector3D.Cross(from, to);

    //旋转轴规范化
    n.Normalize();

    //旋转矩阵
    Matrix4x4 rotateMatrix = new Matrix4x4();

    //旋转的弧度
    double radian = angle * Math.PI / 180;
    float cosAngle = (float)Math.Cos(radian);
    float sinAngle = (float)Math.Sin(radian);

    //矩阵的数据
    //这里看不懂的自行科普矩阵知识
    rotateMatrix.SetRow(0, new Vector4(n.x * n.x * (1 - cosAngle) + cosAngle, n.x * n.y * (1 - cosAngle) + n.z * sinAngle, n.x * n.z * (1 - cosAngle) - n.y * sinAngle, 0));
    rotateMatrix.SetRow(1, new Vector4(n.x * n.y * (1 - cosAngle) - n.z * sinAngle, n.y * n.y * (1 - cosAngle) + cosAngle, n.y * n.z * (1 - cosAngle) + n.x * sinAngle, 0));
    rotateMatrix.SetRow(2, new Vector4(n.x * n.z * (1 - cosAngle) + n.y * sinAngle, n.y * n.z * (1 - cosAngle) - n.x * sinAngle, n.z * n.z * (1 - cosAngle) + cosAngle, 0));
    rotateMatrix.SetRow(3, new Vector4(0, 0, 0, 1));

    Vector4 v = Vector3D.ToVector4(from);
    Vector3D vector = new Vector3D();
    for (int i = 0; i &lt; 3; ++i)
    {
        for (int j = 0; j &lt; 3; j++)
        {
            vector[i] += v[j] * rotateMatrix[j, i];
        }
    }
    return vector;
}

/// &lt;summary&gt;
/// 将一个Vector3D转换为Vector4
/// &lt;/summary&gt;
/// &lt;param name=&quot;v&quot;&gt;&lt;/param&gt;
/// &lt;returns&gt;&lt;/returns&gt;
public static Vector4 ToVector4(Vector3D v)
{
    return new Vector4(v.x, v.y, v.z, 0);
}

public Vector3 ToVector3()
{
    return new Vector3(x, y, z);
}
</code></pre><p>这里暂时没有对两个向量共线反向的情况进行说明，不过主要实现已经给出来了。但是，我发现一点问题，看图：<br>（1）v1 = new Vector3(0, 2, 0);v2 = new Vector3(5, 0, 0);<br><img src="https://img-blog.csdn.net/20161211204127975?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjY5OTk1MDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>ok，正常</p>
<p>（2）v1 = new Vector3(3, 0, 0);v2 = new Vector3(0, 0, 5);<br><img src="https://img-blog.csdn.net/20161211204257397?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjY5OTk1MDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>ok，正常</p>
<p>（3）在RotateTo函数中，数据不精确导致存在误差，也就是我打印v1和v2的叉乘 （图中黄色） 与 （图中红色向量）的叉乘<br>存在误差，这样其实就是该函数的旋转轴不准确。</p>
<p>以上猜想以及代码实现 没有找到权威认证，如有异议，欢迎探讨。。。</p>
<p>补充：<br>自己无聊利用Slerp插值画了下面这个图，纯属娱乐。。。<br><img src="https://img-blog.csdn.net/20161212121854699?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjY5OTk1MDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>以上知识分享，如有错误，欢迎指出，共同学习，共同进步。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jingfengji.github.io/2016/12/08/UGUI之Aspect Ratio Fitter组件介绍/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.Ding">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JingFengJi">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/12/08/UGUI之Aspect Ratio Fitter组件介绍/" class="post-title-link" itemprop="url">UGUI之Aspect Ratio Fitter组件介绍</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-12-08 15:11:06" itemprop="dateCreated datePublished" datetime="2016-12-08T15:11:06+08:00">2016-12-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-11 22:02:59" itemprop="dateModified" datetime="2019-03-11T22:02:59+08:00">2019-03-11</time>
              
            
          </span>

          

          
            
            
          

          
          
            <span id="/2016/12/08/UGUI之Aspect Ratio Fitter组件介绍/" class="leancloud_visitors" data-flag-title="UGUI之Aspect Ratio Fitter组件介绍">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">Views: </span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <meta name="referrer" content="no-referrer">

<p>组件截图如下：<br><img src="https://img-blog.csdn.net/20161130181516831" alt="这里写图片描述"></p>
<p>1、Aspect Mode：AspectMode枚举类型</p>
<pre><code>public enum AspectMode 
{                     
    //不使用适合的纵横比
    None,

    //让Height随着Width自动调节
    WidthControlsHeight,

    //让Width随着Height自动调节
    HeightControlsWidth,

    //宽度、高度、位置和锚点都会被自动调整，以使得该矩形拟合父物体的矩形内，同时保持宽高比例
    FitInParent,

    //宽度、高度、位置和锚点都会被自动调整，以使得该矩形覆盖父物体的整个区域，同时保持宽高比
    EnvelopeParent
}
</code></pre><p>2、Aspect Ratio：宽高比例，width/height</p>
<p>下面根据实际情况来介绍一下该组件。在我的工作中，遇到一种情况，玩家获得一些奖励，做成一个通用的UI界面，该界面通常包括以下东西：标题、获得按钮、中间是一排物品item，显然中间的一排物品item会用到水平布局，并且居中显示，每一个item又包括一个icon和一个text（显示count），如果此时存在某一个icon比其他的大些，就会显得很突兀，这个时候我就用到了该组件</p>
<p>给item预制件 中的icon 添加一个父物体，然后给icon加一个Aspect Ratio<br>Fitter，AspectMode选用FitInParent，Aspect Ratio的值需要在代码中计算，因为我们在做这个UI的时候<br>，肯定是根据数据来动态实例化这些item的，每一个icon的宽高比不一样，所以需要在代码中计算，代码如下：</p>
<pre><code>Rect rect = GetComponent&lt;Image&gt;().sprite.rect;
AspectRatioFitter fitter = GetComponent&lt;AspectRatioFitter&gt;();
fitter.aspectRatio = rect.width / rect.height;
</code></pre><p>这种做法就会保持icon的大小基本一致，当然如果美术团队出的物品图片资源都一致大小，咱们也就省去了这一步。</p>
<p>以上知识分享，如有错误，欢迎指出，共同学习，共同进步。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jingfengji.github.io/2016/11/30/UGUI之布局实战——聊天系统/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.Ding">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JingFengJi">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/11/30/UGUI之布局实战——聊天系统/" class="post-title-link" itemprop="url">UGUI之布局实战——聊天系统</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-11-30 17:56:54" itemprop="dateCreated datePublished" datetime="2016-11-30T17:56:54+08:00">2016-11-30</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-11 22:02:52" itemprop="dateModified" datetime="2019-03-11T22:02:52+08:00">2019-03-11</time>
              
            
          </span>

          

          
            
            
          

          
          
            <span id="/2016/11/30/UGUI之布局实战——聊天系统/" class="leancloud_visitors" data-flag-title="UGUI之布局实战——聊天系统">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">Views: </span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <meta name="referrer" content="no-referrer">

<h2 id="聊天系统中的UGUI布局"><a href="#聊天系统中的UGUI布局" class="headerlink" title="聊天系统中的UGUI布局"></a>聊天系统中的UGUI布局</h2><p>常用的聊天系统内容包括以下几点：<br>1、发言内容；<br>2、发言人头像<br>3、发言人名称<br>4、语言聊天（本文不考虑该功能，与布局无关）<br>5、表情（本文暂不考虑该功能，后续补充）<br>（4.1）表情与文字混排，比如：PC端的QQ聊天<br>（4.2）表情与文字分开，比如：移动端的QQ<br>6、聊天模式：文本模式、气泡模式<br>（5.1）文本模式：参与聊天的所有人均在左边<br>（5.2）气泡模式：自己的气泡在左边，其余玩家的气泡在右边，如下图：<br><img src="https://img-blog.csdn.net/20161130170008725" alt="这里写图片描述"></p>
<p><img src="https://img-blog.csdn.net/20161130170129242" alt="这里写图片描述"></p>
<p>这里以气泡模式为例进行讲解：<br>先上类似效果图：<br><img src="https://img-blog.csdn.net/20161130170902322" alt="这里写图片描述"></p>
<p>先简单分析一下：<br>这里分为三个预制件：<br>（1）整个对话框作为一个预制件a<br>（2）玩家自己的气泡作为一个预制件b<br>（3）其余玩家的气泡作为一个预制件c<br>然后预制件a对气泡用了垂直布局；预制件b和c做法类似，大小一致；预制件b和c中的气泡背景图片要随着文字内容变化而自动缩放，因此背景图片身上挂上一个Vertical<br>Layout Group组件和Content Size Fitter组件，相关设置如下：<br><img src="https://img-blog.csdn.net/20161130173138099" alt="这里写图片描述"><br>然后将文字内容物体作为背景图片的子物体，并添加组件Content Size Fitter<br>相关设置如下：<br><img src="https://img-blog.csdn.net/20161130173402647" alt="这里写图片描述"></p>
<p>预制件b和c还有一点区别就是b（玩家自己）的Pivot为（1,1），预制件c（其他玩家）的Pivot为（0,1）</p>
<p>这样描述可能不太好理解，最后会直接给大家提供一个工程下载地址。</p>
<p>然后聊天框还支持滚动翻阅浏览前面的聊天记录，因此还需要Scroll Rect、Mask等组件<br><img src="https://img-blog.csdn.net/20161130175154983" alt="这里写图片描述"></p>
<p><img src="https://img-blog.csdn.net/20161130175312655" alt="这里写图片描述"></p>
<p>由于聊天窗口下方几个按钮和输入框不是布局的重点，这里就不做介绍，如有需要，后续给大家提供一个工程下载地址。</p>
<p>那么，布局实战——聊天系统就介绍到这里。</p>
<p>以上知识分享，如有错误，欢迎指出，共同学习，共同进步。</p>
<hr>
<p>更新：<br>Demo示意图如下：<br><img src="https://img-blog.csdn.net/20170114224142012?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjY5OTk1MDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>此时图中是空的聊天窗口，每发送或者收到一条聊天记录，只需要生成一个相应 的预制件并作为Content的子物体</p>
<p><img src="https://img-blog.csdn.net/20170114224522158?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjY5OTk1MDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>关于聊天系统的布局呢，根据设计不同布局也就不同，这里是将我工作中的一个聊天系统讲解给大家，具体详情如有兴趣欢迎点击链接： <a href="http://pan.baidu.com/s/1hrMxwf6" target="_blank" rel="noopener"><br>http://pan.baidu.com/s/1hrMxwf6 </a> 密码：6bss<br>下载工程</p>
<p>我用的unity版本是5.3.7，工程所用美术资源非本人原创，请不要商用，仅限学习使用，如因此出现版权问题，与本人无关。</p>
<p>以上知识分享，如有错误，欢迎指出，共同学习，共同进步。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jingfengji.github.io/2016/11/30/UGUI之Grid Layout Group组件介绍/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.Ding">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JingFengJi">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/11/30/UGUI之Grid Layout Group组件介绍/" class="post-title-link" itemprop="url">UGUI之Grid Layout Group组件介绍</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-11-30 16:46:37" itemprop="dateCreated datePublished" datetime="2016-11-30T16:46:37+08:00">2016-11-30</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-11 22:03:05" itemprop="dateModified" datetime="2019-03-11T22:03:05+08:00">2019-03-11</time>
              
            
          </span>

          

          
            
            
          

          
          
            <span id="/2016/11/30/UGUI之Grid Layout Group组件介绍/" class="leancloud_visitors" data-flag-title="UGUI之Grid Layout Group组件介绍">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">Views: </span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <meta name="referrer" content="no-referrer">

<p>Grid Layout Group是LayoutGroup的子类</p>
<p>脚本属性截图如下：<br><img src="https://img-blog.csdn.net/20161130135310391" alt="这里写图片描述"></p>
<p>1、Padding：RectOffset类型，矩形偏移，详解请戳 <a href="http://blog.csdn.net/qq_26999509/article/details/53406107" target="_blank" rel="noopener"> UGUI之Horizontal Layout Group组件介绍
</a></p>
<p>2、Cell Size：Vector2类型，默认值为(100,100)，网格中的每个单元格的大小</p>
<pre><code>[SerializeField] protected Vector2 m_CellSize = new Vector2(100, 100);
public Vector2 cellSize { get { return m_CellSize; } set { SetProperty(ref m_CellSize, value); } }
</code></pre><p>3、Spacing：这里的Spacing不同于水平布局、垂直布局，是Vector2类型，既然是网格布局，当然存在水平方向的间隔和垂直方向的间隔，这里也不做过多的介绍。</p>
<p>3、Start Corner：Corner枚举类型</p>
<pre><code>public enum Corner 
{ 
    UpperLeft = 0,      //左上角
    UpperRight = 1,     //右上角
    LowerLeft = 2,      //左下角
    LowerRight = 3      //右下角
}
</code></pre><p>第一个单元格放在哪个角落，默认为UpperLeft左上角</p>
<p>4、Start Axis：Axis枚举类型</p>
<pre><code>public enum Axis 
{ 
    Horizontal = 0,     //水平
    Vertical = 1        //垂直
}
</code></pre><p>（1）Horizontal：水平<br>优先水平排列单元格<br>（2）Vertical：垂直<br>优先垂直排列单元格</p>
<p>5、Child Alignment：TextAnchor枚举类型，文本锚点，详解请戳 <a href="http://blog.csdn.net/qq_26999509/article/details/53406107" target="_blank" rel="noopener"> UGUI之Horizontal Layout Group组件介绍
</a></p>
<p>6、Constraint：Constraint枚举类型</p>
<pre><code>public enum Constraint 
{ 
    Flexible = 0,              //不限制行数和列数
    FixedColumnCount = 1,      //约束指定数量的列数
    FixedRowCount = 2          //约束指定数量的行数
}
</code></pre><p>下面以几个截图来看看上面几个设置具体是怎样的作用：<br>以下单元格物体加了一个Text来表示其编号，并且Hierarchy面板中的层级关系并未调整</p>
<p>图一：默认情况<br><img src="https://img-blog.csdn.net/20161130144209367" alt="这里写图片描述"></p>
<p>图二：设置Start Corner为Upper Right<br><img src="https://img-blog.csdn.net/20161130163937264" alt="这里写图片描述"></p>
<p>图三：设置Start Axis为Vertical<br><img src="https://img-blog.csdn.net/20161130164106471" alt="这里写图片描述"></p>
<p>图四：设置Start Corner为Lower Left、Start Axis为Vertical<br><img src="https://img-blog.csdn.net/20161130164300577" alt="这里写图片描述"></p>
<p>从以上图中不难看出这两个设置的使用用途。</p>
<p>实际开发中，我常与Content Size Fitter组件一起使用<br><img src="https://img-blog.csdn.net/20161130164549547" alt="这里写图片描述"></p>
<p>以上知识分享，如有错误，欢迎指出，共同学习，共同进步。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jingfengji.github.io/2016/11/30/UGUI之Vertical Layout Group组件介绍/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.Ding">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JingFengJi">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/11/30/UGUI之Vertical Layout Group组件介绍/" class="post-title-link" itemprop="url">UGUI之Vertical Layout Group组件介绍</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-11-30 12:01:04" itemprop="dateCreated datePublished" datetime="2016-11-30T12:01:04+08:00">2016-11-30</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-11 22:03:26" itemprop="dateModified" datetime="2019-03-11T22:03:26+08:00">2019-03-11</time>
              
            
          </span>

          

          
            
            
          

          
          
            <span id="/2016/11/30/UGUI之Vertical Layout Group组件介绍/" class="leancloud_visitors" data-flag-title="UGUI之Vertical Layout Group组件介绍">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">Views: </span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <meta name="referrer" content="no-referrer">

<p>VerticalLayoutGroup也是HorizontalOrVerticalLayoutGroup的子类，HorizontalOrVerticalLayoutGroup是LayoutGroup的子类，下面从源码中进行对比</p>
<pre><code>namespace UnityEngine.UI
{
    [AddComponentMenu(&quot;Layout/Horizontal Layout Group&quot;, 150)]
    public class HorizontalLayoutGroup : HorizontalOrVerticalLayoutGroup
    {
        protected HorizontalLayoutGroup()
        {}

        public override void CalculateLayoutInputHorizontal()
        {
            base.CalculateLayoutInputHorizontal();
            CalcAlongAxis(0, false);
        }

        public override void CalculateLayoutInputVertical()
        {
            CalcAlongAxis(1, false);
        }

        public override void SetLayoutHorizontal()
        {
            SetChildrenAlongAxis(0, false);
        }

        public override void SetLayoutVertical()
        {
            SetChildrenAlongAxis(1, false);
        }
    }
}



namespace UnityEngine.UI
{
    [AddComponentMenu(&quot;Layout/Vertical Layout Group&quot;, 151)]
    public class VerticalLayoutGroup : HorizontalOrVerticalLayoutGroup
    {
        protected VerticalLayoutGroup()
        {}

        public override void CalculateLayoutInputHorizontal()
        {
            base.CalculateLayoutInputHorizontal();
            CalcAlongAxis(0, true);
        }

        public override void CalculateLayoutInputVertical()
        {
            CalcAlongAxis(1, true);
        }

        public override void SetLayoutHorizontal()
        {
            SetChildrenAlongAxis(0, true);
        }

        public override void SetLayoutVertical()
        {
            SetChildrenAlongAxis(1, true);
        }
    }
}
</code></pre><p>可以看出，唯一的区别就是四个重写的基方法里的调用的CalcAlongAxis、SetChildrenAlongAxis一个是false，一个是true，那么显然true表示是vertical，false表示horizontal</p>
<p>所以在这就不过多的对Vertical Layout Group组件做过多的介绍，用法跟 Horizontal Layout<br>Group组件一样的用，如果对Horizontal Layout Group组件有不了解的，详情请点击这里 <a href="http://blog.csdn.net/qq_26999509/article/details/53406107" target="_blank" rel="noopener"> Horizontal Layout<br>Group组件介绍 </a></p>
<p>以上知识分享，如有错误，欢迎指出，共同学习，共同进步。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Mr.Ding</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">59</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">4</span>
                    <span class="site-state-item-name">categories</span>
                  
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">7</span>
                    <span class="site-state-item-name">tags</span>
                  
                </div>
              
            </nav>
          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mr.Ding</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.0.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.1"></script>

  <script src="/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/js/src/schemes/muse.js?v=7.0.1"></script>



  

  


  <script src="/js/src/bootstrap.js?v=7.0.1"></script>


  
  



  




  
  
  <script>
    
    function showTime(Counter) {
      var entries = [];
      var $visitors = $('.leancloud_visitors');

      $visitors.each(function() {
        entries.push( $(this).attr('id').trim() );
      });

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url: { '$in': entries } }) })
        .done(function({ results }) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.url;
            var time = item.time;
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for (var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if (countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function ({ responseJSON }) {
          console.log('LeanCloud Counter Error: ' + responseJSON.code + ' ' + responseJSON.error);
        });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + 'NNhaQgimB4QlP2E7VIp881se-gzGzoHsz')
        .done(function({ api_server }) {
          var Counter = function(method, url, data) {
            return $.ajax({
              method: method,
              url: 'https://' + api_server + '/1.1' + url,
              headers: {
                'X-LC-Id': 'NNhaQgimB4QlP2E7VIp881se-gzGzoHsz',
                'X-LC-Key': 'r32VGyBHt0lquCi8EGcIJlJN',
                'Content-Type': 'application/json',
              },
              data: data
            });
          };
          
            if ($('.post-title-link').length >= 1) {
              showTime(Counter);
            }
          
        });
    });
  </script>



  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
